import type { McpUiHostContext, McpUiInitializeRequest } from "@modelcontextprotocol/ext-apps";
import type { Bridge, Subscribe } from "../types.js";
import type { McpAppContext, McpAppContextKey } from "./types.js";
type McpAppInitializationOptions = Pick<McpUiInitializeRequest["params"], "appInfo">;
export declare class McpAppBridge implements Bridge<McpUiHostContext> {
    private static instance;
    context: McpAppContext;
    private listeners;
    private pendingRequests;
    private nextId;
    private initialized;
    private appInitializationOptions;
    private requestTimeout;
    private cleanupSizeObserver;
    constructor(options: McpAppInitializationOptions, requestTimeout?: number);
    static getInstance(options?: Partial<McpAppInitializationOptions>, requestTimeout?: number): McpAppBridge;
    subscribe(key: McpAppContextKey): Subscribe;
    subscribe(keys: readonly McpAppContextKey[]): Subscribe;
    getSnapshot<K extends keyof McpAppContext>(key: K): McpAppContext[K];
    cleanup: () => void;
    static resetInstance(): void;
    request<R extends {
        method: string;
        params?: unknown;
    }, T>({ method, params, }: R): Promise<T>;
    private emit;
    private updateContext;
    private init;
    private handleMessage;
    private handleResponse;
    private handleNotification;
    private handleRequest;
    private connect;
    private notify;
    private sendSizeChanged;
    /**
     * Set up automatic size change notifications using ResizeObserver.
     * Based on @modelcontextprotocol/ext-apps App.setupSizeChangedNotifications
     * @see https://github.com/modelcontextprotocol/ext-apps/blob/main/src/app.ts#L940-L989
     */
    private setupSizeChangedNotifications;
}
export {};
