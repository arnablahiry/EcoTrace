import {
  McpAppAdaptor
} from "./chunk-7RVYFRNE.js";
import {
  require_jsx_runtime
} from "./chunk-ZXQMO2NG.js";
import {
  require_react
} from "./chunk-FCVBRA66.js";
import {
  __toESM
} from "./chunk-5WRI5ZAA.js";

// node_modules/skybridge/dist/web/components/modal-provider.js
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);
var import_react = __toESM(require_react(), 1);
var modalStyles = `
.sb-modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 9998;
}
.sb-modal-container {
  border-radius: 12px;
  position: fixed;
  inset: 0;
  margin: auto;
  width: fit-content;
  height: fit-content;
  background: white;
  z-index: 9999;
}
`;
function ModalProvider({ children }) {
  const adaptor = McpAppAdaptor.getInstance();
  const { mode } = (0, import_react.useSyncExternalStore)(adaptor.getHostContextStore("view").subscribe, adaptor.getHostContextStore("view").getSnapshot);
  const isOpen = mode === "modal";
  const handleBackdropClick = (e) => {
    if (e.target === e.currentTarget) {
      adaptor.closeModal();
    }
  };
  (0, import_react.useEffect)(() => {
    if (!isOpen) {
      return;
    }
    const handler = (e) => {
      if (e.key === "Escape") {
        adaptor.closeModal();
      }
    };
    document.addEventListener("keydown", handler);
    return () => document.removeEventListener("keydown", handler);
  }, [isOpen, adaptor]);
  return (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, { children: [(0, import_jsx_runtime.jsx)("style", { children: modalStyles }), isOpen && // biome-ignore lint/a11y/useKeyWithClickEvents: backdrop isn't focusable
  (0, import_jsx_runtime.jsx)("div", { role: "dialog", className: "sb-modal-backdrop", onClick: handleBackdropClick }), (0, import_jsx_runtime.jsx)("div", { className: isOpen ? "sb-modal-container" : void 0, children })] });
}
export {
  ModalProvider
};
//# sourceMappingURL=modal-provider-2POV3CS5.js.map
